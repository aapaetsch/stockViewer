(this.webpackJsonpstockviewer=this.webpackJsonpstockviewer||[]).push([[0],{464:function(e,t,a){e.exports=a(871)},469:function(e,t,a){},871:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(30),o=a.n(c),i=(a(469),a(40)),s=a(41),l=a(48),u=a(47),p=a(329),d=a(122),m=a.n(d);m.a.initializeApp({apiKey:"AIzaSyDWBVqbz6vL6NdeIej0HccjA1PaDJ04jpI",authDomain:"stockviewer-2c7c3.firebaseapp.com",databaseURL:"https://stockviewer-2c7c3.firebaseio.com",projectId:"stockviewer-2c7c3",storageBucket:"stockviewer-2c7c3.appspot.com",messagingSenderId:"220017451421",appId:"1:220017451421:web:0ccfacdb66182b06e98f74",measurementId:"G-ET4VWCH7VY"});var h=m.a.auth,f=m.a.database(),g=(m.a.firestore(),a(68)),b=a(155),v=a(876),y=a(886),E=a(883),k=a(874),S=a(885),x=a(78),w=a(183),C=a(115),j=a(25),O=a.n(j),D=a(58);function I(e,t,a){return P.apply(this,arguments)}function P(){return(P=Object(D.a)(O.a.mark((function e(t,a,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=h(),e.next=4,B(r);case 4:return e.t1=e.sent,e.abrupt("return",e.t0.setPersistence.call(e.t0,e.t1).then(Object(D.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().createUserWithEmailAndPassword(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))));case 8:return e.prev=8,e.t2=e.catch(0),console.log(e.t2),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function U(e,t,a){return A.apply(this,arguments)}function A(){return(A=Object(D.a)(O.a.mark((function e(t,a,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=h(),e.next=4,B(r);case 4:return e.t1=e.sent,e.abrupt("return",e.t0.setPersistence.call(e.t0,e.t1).then(Object(D.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().signInWithEmailAndPassword(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))));case 8:return e.prev=8,e.t2=e.catch(0),console.log(e.t2),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function N(e,t){return T.apply(this,arguments)}function T(){return(T=Object(D.a)(O.a.mark((function e(t,a){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="google"===e.t0?3:"git"===e.t0?5:"facebook"===e.t0?7:9;break;case 3:return r=new h.GoogleAuthProvider,e.abrupt("break",11);case 5:return r=new h.GithubAuthProvider,e.abrupt("break",11);case 7:return r=new h.FacebookAuthProvider,e.abrupt("break",11);case 9:return r=null,e.abrupt("break",11);case 11:return e.prev=11,e.t1=h(),e.next=15,B(a);case 15:return e.t2=e.sent,e.abrupt("return",e.t1.setPersistence.call(e.t1,e.t2).then(Object(D.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().signInWithPopup(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))));case 19:return e.prev=19,e.t3=e.catch(11),console.log(e.t3),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,null,[[11,19]])})))).apply(this,arguments)}function B(e){return R.apply(this,arguments)}function R(){return(R=Object(D.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",h.Auth.Persistence.LOCAL);case 2:return e.abrupt("return",h.Auth.Persistence.SESSION);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return M.apply(this,arguments)}function M(){return(M=Object(D.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h().signOut());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=a(87),V=a(899),W=a(881),z=a(879),G=a(215),H=a(902),$=a(887),q=a(888),_=a(889),J=a(890),X=(a(89),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).hideAuthentication=function(){console.log("click"),n.props.closeAuthenticate();try{n.formRef.current.resetFields()}catch(e){console.log(e)}},n.state={error:null,remembered:!1},n.handleSubmit=n.handleSubmit.bind(Object(L.a)(n)),n.providerSignIn=n.providerSignIn.bind(Object(L.a)(n)),n.formRef=Object(r.createRef)(),n}return Object(s.a)(a,[{key:"shouldComponentUpdate",value:function(e){return this.props!==e}},{key:"handleSubmit",value:function(){var e=Object(D.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({error:""}),console.log(this.state),e.prev=2,"Login"!==this.props.title){e.next=7;break}U(t.emailItem,t.passwordItem,this.state.remembered).then((function(e){!1!==e?V.b.success("Signed in as: "+Object(d.auth)().currentUser.email.toString()):V.b.error("Error Signing In.")})),e.next=13;break;case 7:if(t.passwordItem!==t.confirmPasswordItem){e.next=11;break}I(t.emailItem,t.passwordItem,this.state.remembered).then((function(e){!1!==e?V.b.success("Signed in as: "+Object(d.auth)().currentUser.email.toString()):V.b.error("Error Signing Up.")})),e.next=13;break;case 11:return V.b.error("Passwords do not match."),e.abrupt("return");case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0),this.setState({error:e.t0.message}),"Login"===this.props.title?V.b.error("Error Signing In"):V.b.error("Error:"+e.t0.message);case 20:this.hideAuthentication();case 21:case"end":return e.stop()}}),e,this,[[2,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"providerSignIn",value:function(){var e=Object(D.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{N(t,this.state.remembered).then((function(e){!1!==e?V.b.success("Signed in as: "+Object(d.auth)().currentUser.displayName):V.b.error("Error Signing in with "+t)}))}catch(a){this.setState({error:a.message}),"Login"===this.props.title?V.b.error("There was an error logging in."):V.b.error("There was an error creating your account.")}this.hideAuthentication();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(W.a,{title:n.a.createElement("h2",{style:{textAlign:"center",color:"#fff"}},this.props.title),visible:this.props.visible,onCancel:this.hideAuthentication,footer:function(e,t){var a="Already Registered? ",r="Login";return"Login"===e&&(r="Sign Up",a="Don't have an account? "),n.a.createElement("div",{style:{textAlign:"center"}},a,"\xa0",n.a.createElement("span",{onClick:function(){return t()},className:"linkHover"},r))}(this.props.title,this.props.changeAuthenticateType)},n.a.createElement(z.a,{name:"normal_login",className:"login-form",ref:this.formRef,initialValues:{remember:!1},onFinish:this.handleSubmit,onFinishFailed:function(e){V.b.error("Error in Authentication")}},n.a.createElement(z.a.Item,{name:"emailItem",rules:[{type:"email",message:"The input is not a valid Email Address."},{required:!0,message:"Please input your Email Address"}]},n.a.createElement(E.a,{name:"email",prefix:n.a.createElement(H.a,{className:"site-form-item-icon"}),placeholder:"Email"})),n.a.createElement(z.a.Item,{name:"passwordItem",rules:[{required:!0,message:"Please enter a Password!"}]},n.a.createElement(E.a,{prefix:n.a.createElement($.a,{className:"site-form-item-icon"}),type:"password",name:"password",placeholder:"Password"})),"Login"!==this.props.title?n.a.createElement(z.a.Item,{name:"confirmPasswordItem",rules:[{required:!0,message:"Passwords must match!"}]},n.a.createElement(E.a,{prefix:n.a.createElement(q.a,{className:"site-form-item-icon"}),type:"password",name:"matchingPassword",placeholder:"Retype Password"})):n.a.createElement("div",null),n.a.createElement("div",{id:"signInGroup",style:{textAlign:"center"}},n.a.createElement(G.a,{onChange:function(){return e.setState({remember:!e.state.remember})},style:{color:"#fff"}},"Remember Me"),n.a.createElement(x.a,{className:"authenticateButton",htmlType:"submit",type:"primary"},this.props.title),n.a.createElement("br",null),n.a.createElement("h3",{style:{color:"#fff"}},"OR"),n.a.createElement(x.a,{className:"authenticateButton",type:"primary",icon:n.a.createElement(_.a,null),onClick:function(){return e.providerSignIn("git")}},"Continue with Github"),n.a.createElement(x.a,{className:"authenticateButton",type:"primary",icon:n.a.createElement(J.a,null),onClick:function(){return e.providerSignIn("google")}},"Continue with Google")))))}}]),a}(r.Component)),K=a(891),Y=E.a.Search,Q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).showAuthenticate=function(e){r.setState({showAuthenticate:!0,authenticateType:e}),console.log("click")},r.hideAuthenticate=function(){r.setState({showAuthenticate:!1,authenticateType:null})},r.switchAuthenticateType=function(){"Login"===r.state.authenticateType?r.setState({authenticateType:"Sign Up"}):r.setState({authenticateType:"Login"})},r.state={separatorCol:15,userCol:2,menuBarGutter:8,showAuthenticate:!1,authenticateType:null},r}return Object(s.a)(a,[{key:"shouldComponentUpdate",value:function(e,t,a){return this.props.currentUser!==e.currentUser||this.state!==t}},{key:"render",value:function(){var e,t=this;return n.a.createElement(w.a,{align:"center",justify:"space-between",gutter:this.state.menuBarGutter},n.a.createElement(C.a,{flex:3},n.a.createElement("h2",{style:{color:"white"}},"Stonks")),n.a.createElement(C.a,{flex:6,offset:1},n.a.createElement(Y,{placeholder:"Enter a Ticker",style:{width:"100%",paddingTop:"4%"},onSearch:function(e){return console.log("search bar:",e)},enterButton:!0})),n.a.createElement(C.a,{flex:6,offset:4},null===this.props.currentUser?n.a.createElement(k.a,null,n.a.createElement(x.a,{type:"primary",onClick:function(){return t.showAuthenticate("Login")}},"Login"),n.a.createElement(x.a,{type:"primary",onClick:function(){return t.showAuthenticate("Sign Up")}},"Sign Up")):(e=this.props.currentUser,n.a.createElement(k.a,{size:"large"},n.a.createElement(S.a,{src:e.photoURL,icon:n.a.createElement(H.a,null)}),n.a.createElement("span",{style:{color:"white"}},null===e.displayName?e.email:e.displayName," \xa0 \xa0"),n.a.createElement(x.a,{type:"primary",icon:n.a.createElement(K.a,null),onClick:F},n.a.createElement(b.b,{to:"/welcome",style:{color:"white"}},"Logout"))))),n.a.createElement(X,{visible:this.state.showAuthenticate,title:this.state.authenticateType,closeAuthenticate:this.hideAuthenticate,changeAuthenticateType:this.switchAuthenticateType}))}}]),a}(r.Component),Z=a(159),ee=a(892),te=a(893),ae=a(894),re=a(895),ne=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).changePage=function(e){e&&"null"!==e.key&&(r.setState({selected:e.key}),console.log(e))},r.state={selected:"/world"},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;h().onAuthStateChanged((function(t){null===t&&e.setState({selected:"/world"})}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.state!==t||this.props!==e}},{key:"render",value:function(){return n.a.createElement(Z.a,{multiple:!1,style:{zIndex:-1},selectedKeys:[this.state.selected],onClick:this.changePage,mode:"inline"},n.a.createElement(Z.a.Item,null),n.a.createElement(Z.a.Item,{onClick:this.props.collapse,key:"null"},n.a.createElement(this.props.isCollapsed?ee.a:te.a)),n.a.createElement(Z.a.Item,{icon:n.a.createElement(ae.a,null),key:"/world"},n.a.createElement(b.b,{to:"/"},"World")),n.a.createElement(Z.a.Item,{icon:n.a.createElement(re.a,null),key:"/portfolio",disabled:!this.props.authenticated},n.a.createElement(b.b,{to:"/portfolio"},"Portfolio")))}}]),a}(r.Component),ce="http://localhost:5000/stonksAPI/v1";function oe(e,t){return ie.apply(this,arguments)}function ie(){return(ie=Object(D.a)(O.a.mark((function e(t,a){var r,n,c,o,i,s,l,u,p,d,m,g;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=h().currentUser)){e.next=3;break}return e.abrupt("return",[!1,null]);case 3:return n=r.uid,e.next=6,fetch("".concat(ce,"/single/exists?ticker=").concat(t.ticker));case 6:return c=e.sent,e.next=9,c.json();case 9:if(o=e.sent,i=!0,o&&(i=!1),!i){e.next=14;break}return e.abrupt("return",!1);case 14:return s=t.ticker.replace(".","_"),l=f.ref("/portfolios/"+n+"/"+s),e.next=18,l.once("value");case 18:if(!(u=e.sent).exists()){e.next=25;break}return e.next=22,se(n,t,a,u);case 22:return e.abrupt("return",e.sent);case 25:return e.prev=25,e.next=28,new Date;case 28:return p=e.sent,d=(Number(a)/Number(t.shares)).toFixed(4),m={category:t.category,shares:Number(t.shares),cost:Number(a),transactions:[{date:p.toString(),transaction:"".concat(t.shares," shares bought @ $").concat(d," ea")}]},g=!0,e.next=34,l.set(m,(function(e){e&&(g=!1)}));case 34:return e.abrupt("return",[g,"add"]);case 37:return e.prev=37,e.t0=e.catch(25),console.log(e.t0),e.abrupt("return",[!1,"add"]);case 41:case"end":return e.stop()}}),e,null,[[25,37]])})))).apply(this,arguments)}function se(e,t,a,r){return le.apply(this,arguments)}function le(){return(le=Object(D.a)(O.a.mark((function e(t,a,r,n){var c,o,i,s,l,u,p,d,m,h,g,b,v;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.ticker.replace(".","_"),o=f.ref("/portfolios/"+t+"/"+c),e.prev=2,i=n.val(),s=n.val().shares,l=n.val().category,u=Number(r)+Number(n.val().cost),p=Number(s)+Number(a.shares),d=(Number(r)/Number(a.shares)).toFixed(4),m={category:a.category,shares:p,cost:u},h=[a.ticker.toUpperCase(),[s,p],u,[l,a.category]],g=!0,b=!0,e.next=15,o.update(m,(function(e){e&&(g=!1)}));case 15:if(!g){e.next=19;break}return v={date:(new Date).toString(),transaction:"".concat(Number(a.shares)," shares bought @ $").concat(d," ea")},e.next=19,o.child("/transactions/").push().set(v,(function(e){e&&(b=!1)}));case 19:if(b){e.next=23;break}return e.next=22,o.update(i);case 22:g=!1;case 23:return e.abrupt("return",[g,"update",h]);case 26:return e.prev=26,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",[!1,"update",null]);case 30:case"end":return e.stop()}}),e,null,[[2,26]])})))).apply(this,arguments)}function ue(e,t,a){return pe.apply(this,arguments)}function pe(){return(pe=Object(D.a)(O.a.mark((function e(t,a,r){var n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("".concat(ce,"/").concat(t,"/multiple?").concat(a,"=").concat(r)),e.next=4,fetch("".concat(ce,"/").concat(t,"/multiple?").concat(a,"=").concat(r));case 4:return n=e.sent,c=n.json(),console.log(c),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var de=a(880),me=a(884),he=a(896),fe=a(897),ge=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement(de.a,{title:this.props.data.name,className:"cardRounded",hoverable:!0},n.a.createElement(me.a,{value:this.props.data.value,precision:2}),n.a.createElement(me.a,{value:this.props.data.change,valueStyle:this.props.data.change>0?{color:"#49aa19"}:{color:"#d32029"},prefix:this.props.data.change>0?n.a.createElement(he.a,null):n.a.createElement(fe.a,null),suffix:" (".concat(this.props.data.changePercent,")")}),n.a.createElement("span",{style:{color:"#bfbfbf",fontSize:"10px",marginTop:"3%"}},"Last updated: ",function(e){var t=new Date(1e3*e);return"".concat(t.toLocaleDateString("en-US")," ").concat(t.toLocaleTimeString("en-US"))}(this.props.data.lastUpdate)))}}]),a}(r.Component),be=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={borders:[8,8],data:[],currencyData:[],indicieData:[]},r.formatMainStats=r.formatMainStats.bind(Object(L.a)(r)),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.formatMainStats()}},{key:"formatMainStats",value:function(){var e=Object(D.a)(O.a.mark((function e(){var t,a,r,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("start"),t=["CADUSD=X","CADEUR=X","CADGBP=X"],e.next=4,ue("currencies","currencies",t);case 4:return a=e.sent,console.log(a),r=["^GSPTSE","^GSPC","^DJI","^IXIC"],e.next=9,ue("indicies","indicies",r);case 9:n=e.sent,console.log(n),this.setState({currencyData:null!==a?a:[],indicieData:null!==n?n:[]});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){function e(e,t){var a=e.map((function(e){return n.a.createElement(C.a,{flex:1},n.a.createElement(ge,{data:e}))}));return n.a.createElement(w.a,{className:"gutter-row",justify:"center",align:"middle",gutter:t},a)}return n.a.createElement("div",{className:"routerBackground"},e(this.state.indicieData,this.state.borders),e(this.state.currencyData,this.state.borders))}}]),a}(r.Component),ve=a(217),ye=a(900),Ee=a(877),ke=a(213),Se=a(901),xe=a(898),we=ke.a.Option,Ce=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var c;return Object(i.a)(this,a),(c=t.call(this,e)).notificationContent=function(e,t){return n.a.createElement("span",null,"Ticker: ",e.ticker.toUpperCase(),n.a.createElement("br",null),"Sector: ",e.category,n.a.createElement("br",null),"Cost: $",t)},c.updatePositionContent=function(e){return n.a.createElement("span",null,"Ticker: ",e[0].toUpperCase(),n.a.createElement("br",null),e[3][0]!==e[3][1]&&n.a.createElement("div",null,n.a.createElement("span",null,"Sector: ",e[3][0]," => ",e[3][1]),n.a.createElement("br",null)),"Shares: ",e[1][0]," => ",e[1][1],n.a.createElement("br",null),"Book Value: $",e[2])},c.showAddStock=function(){c.setState({visible:!0})},c.hideAddStock=function(){try{c.formRef.current.resetFields()}catch(e){console.log(e)}c.setState({visible:!1})},c.state={visible:!1,costTypeSize:110},c.addStockOk=c.addStockOk.bind(Object(L.a)(c)),c.addStockCancel=c.addStockCancel.bind(Object(L.a)(c)),c.formRef=Object(r.createRef)(),c}return Object(s.a)(a,[{key:"addStockOk",value:function(){var e=Object(D.a)(O.a.mark((function e(t){var a,r=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),t.ticker=t.ticker.toUpperCase(),!t.shares.toString().includes(".")){e.next=6;break}V.b.error("Number of shares must be whole numbers.",15),e.next=14;break;case 6:if(!isNaN(t.cost)){e.next=10;break}V.b.error("Cost must be a number."),e.next=14;break;case 10:return a="perShare"===t.costType?Number(t.cost)*Number(t.shares):Number(t.cost),V.b.loading("Add Stock in Progress...",3),e.next=14,oe(t,a).then((function(e){console.log(e),e[0]?"add"===e[1]?Se.a.success({message:"Added Stock Successfully",description:r.notificationContent(t,a)}):Se.a.success({message:"Updated Stock Successfully",description:r.updatePositionContent(e[2])}):V.b.error("There was an error adding the position."),r.hideAddStock()}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addStockCancel",value:function(){var e=Object(D.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.hideAddStock();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=n.a.createElement(z.a.Item,{name:"costType",noStyle:!0},n.a.createElement(ke.a,{style:{width:this.state.costTypeSize}},n.a.createElement(we,{value:"perShare"},"Per Share"),n.a.createElement(we,{value:"allShares"},"Total Cost")));return n.a.createElement("div",null,n.a.createElement(x.a,{type:"primary",icon:n.a.createElement(xe.a,null),onClick:this.showAddStock,disabled:this.props.updatingData}),n.a.createElement(W.a,{title:"Add A Stock",visible:this.state.visible,maskClosable:!1,closable:!1,footer:[n.a.createElement("p",null,'Ticker should be in form "Ticker.Exchange" i.e. "BAM-A.TO". If you are unsure, please check at ',n.a.createElement("a",{href:"https://ca.finance.yahoo.com"},"Yahoo Finance"))]},n.a.createElement(z.a,Object.assign({},{labelCol:{xs:{span:12},sm:{span:6}},wrapperCol:{xs:{span:28},sm:{span:20}}},{layout:"horizontal",size:"medium",initialValues:{costType:"perShare"},ref:this.formRef,onFinish:this.addStockOk}),n.a.createElement(z.a.Item,{name:"ticker",label:"Ticker",rules:[{required:!0,message:"Must be a valid ticker."}]},n.a.createElement(E.a,null)),n.a.createElement(z.a.Item,{name:"category",label:"Market Sector",rules:[{required:!0,message:"Must belong to a Sector."}]},n.a.createElement(ke.a,null,n.a.createElement(we,{value:"Technology"},"Technology"),n.a.createElement(we,{value:"Communication"},"Communication"),n.a.createElement(we,{value:"Consumer Discretionary"},"Consumer Discretionary"),n.a.createElement(we,{value:"Consumer Staple"},"Consumer Staples"),n.a.createElement(we,{value:"Energy"},"Energy"),n.a.createElement(we,{value:"Financial"},"Financial"),n.a.createElement(we,{value:"Healthcare"},"Healthcare"),n.a.createElement(we,{value:"Industrial"},"Industrial"),n.a.createElement(we,{value:"Materials"},"Materials"),n.a.createElement(we,{value:"Real Estate"},"Real Estate"),n.a.createElement(we,{value:"Utilities"},"Utilities"),n.a.createElement(we,{value:"International"},"International"),n.a.createElement(we,{value:"Misc"},"Misc"))),n.a.createElement(z.a.Item,{name:"shares",label:"Shares",rules:[{required:!0,message:"Must have at least 1 share."}]},n.a.createElement(E.a,{type:"number"})),n.a.createElement(z.a.Item,{name:"cost",label:"Cost",rules:[{required:!0,message:"A stock must have a cost."}]},n.a.createElement(E.a,{addonBefore:e,style:{width:"100%"}})),n.a.createElement(w.a,{justify:"end",align:"middle"},n.a.createElement(C.a,{span:4},n.a.createElement(k.a,null,n.a.createElement(x.a,{type:"submit",onClick:this.addStockCancel},"Cancel"),n.a.createElement(x.a,{type:"primary",htmlType:"submit"},"Submit"))),n.a.createElement(C.a,{span:5})))))}}]),a}(r.Component),je=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement(de.a,{title:this.props.data.title,headStyle:{backgroundColor:"#d9d9d9",color:"#000000",borderRadius:0},bodyStyle:{borderRadius:0},bordered:!1},n.a.createElement(w.a,null,n.a.createElement(C.a,null),n.a.createElement(C.a,null),n.a.createElement(C.a,null,n.a.createElement(me.a,{value:this.props.data.changePercent,precision:2,valueStyle:this.props.data.changePercent>=0?{color:"#3f8600"}:{color:"#cf1322"},prefix:this.props.data.changePercent>=0?n.a.createElement(he.a,null):n.a.createElement(fe.a,null),suffix:"%"}))))}}]),a}(r.Component),Oe=[{value:"Technology",text:"Technology"},{value:"Communication",text:"Communication"},{value:"Consumer Discretionary",text:"Consumer Discretionary"},{value:"Consumer Staple",text:"Consumer Staple"},{value:"Energy",text:"Energy"},{value:"Financial",text:"Financial"},{value:"Healthcare",text:"Healthcare"},{value:"Industrial",text:"Industrial"},{value:"Materials",text:"Materials"},{value:"Real Estate",text:"Real Estate"},{value:"Utilities",text:"Utilities"},{value:"International",text:"International"},{value:"Misc",text:"Misc"}],De=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={showLoading:!1,gutterSize:[10,10]},r}return Object(s.a)(a,[{key:"shouldComponentUpdate",value:function(e,t,a){return this.props.data!==e.data||this.state.showLoading!==t.showLoading}},{key:"componentDidUpdate",value:function(e,t,a){0===this.props.data.length&&null!==h().currentUser?this.setState({showLoading:!0}):this.setState({showLoading:!1})}},{key:"render",value:function(){var e=this;function t(e){for(var t=0,a=0;a<e.length;a++)t+=e.charCodeAt(a);return t}var a=[{title:"% Portfolio",dataIndex:"portfolioPercent",fixed:"left",render:function(e){return n.a.createElement("span",null,e," %")}},{title:"Ticker",dataIndex:"ticker",fixed:"left",render:function(e){return n.a.createElement("span",null,e.toUpperCase())}},{title:"Market Sector",dataIndex:"category",sorter:function(e,a){return t(e.category)-t(a.category)},filters:Oe,onFilter:function(e,t){return 0===t.category.indexOf(e)}},{title:"Current Price",dataIndex:"current",sorter:{compare:function(e,t){return e.current-t.current},multiple:2},render:function(e){return n.a.createElement("span",null,"$ ",e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}},{title:"Shares",dataIndex:"shares"},{title:"Book Value",dataIndex:"cost",sorter:{compare:function(e,t){return e.cost-t.cost},multiple:3},render:function(e){return n.a.createElement("span",null,"$ ",e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}},{title:"Current Value",dataIndex:"currentValue",sorter:{compare:function(e,t){return e.currentValue-t.currentValue},multiple:1},render:function(e){return n.a.createElement("span",null,"$ ",e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}},{title:"Profit",dataIndex:"profit",render:function(e){return n.a.createElement("span",null,"$ ",e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}},{title:"% Profit",dataIndex:"profitPercent",render:function(e){return n.a.createElement("span",null,e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),"%")}}],r={xs:12,md:14,lg:18},c={xs:10,md:10,lg:6};return n.a.createElement("div",{key:this.props.data},n.a.createElement(w.a,{align:"middle",className:"stonkCardHeader"},n.a.createElement(C.a,r,n.a.createElement("h3",{style:{color:"#fff"}},"Portfolio")),n.a.createElement(C.a,c,n.a.createElement(k.a,{style:{color:"#fff"}},"Currency:",n.a.createElement(ye.a,{checkedChildren:"CAD",unCheckedChildren:"USD",defaultChecked:!0,onChange:this.props.setCurrency}),"\xa0",n.a.createElement(Ce,{updateMainData:this.props.updateParentData})))),n.a.createElement("div",{className:"stonkCardBody"},n.a.createElement(Ee.a,{rowClassName:function(e,t){return"".concat(function(e){var t=Number(e);return t>=100?"largePositive":t>25?"mediumPositive":t<0?"negative":"smallPositive"}(e.profitPercent))},expandable:{expandedRowRender:function(e,t){return n.a.createElement(je,{data:e})},expandRowByClick:!0},columns:a,pagination:!1,scroll:{x:1e3,y:300},dataSource:this.props.data,loading:this.state.showLoading,size:"small",style:{borderRadius:"25px"},summary:function(){return n.a.createElement(Ee.a.Summary.Row,{style:{backgroundColor:"#f5f5f5"}},n.a.createElement(Ee.a.Summary.Cell,{index:1,colRow:3,style:{backgroundColor:"#f5f5f5"}},"Total"),n.a.createElement(Ee.a.Summary.Cell,null),n.a.createElement(Ee.a.Summary.Cell,null),n.a.createElement(Ee.a.Summary.Cell,null),n.a.createElement(Ee.a.Summary.Cell,null),n.a.createElement(Ee.a.Summary.Cell,null),n.a.createElement(Ee.a.Summary.Cell,{index:6},"$ ",e.props.totalBookValue.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),n.a.createElement(Ee.a.Summary.Cell,{index:7},"$ ",e.props.currentTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),n.a.createElement(Ee.a.Summary.Cell,{index:8},"$ ",(e.props.currentTotal-e.props.totalBookValue).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),n.a.createElement(Ee.a.Summary.Cell,{index:9},(e.props.currentTotal/e.props.totalBookValue*100).toFixed(2)," %"))}})))}}]),a}(r.Component),Ie=a(277),Pe=a(882),Ue=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).formatData=function(){!1===r.state.updating&&r.setState({updating:!0},(function(){var e=[],t=[],a={},n={};0!==r.props.data.length&&(console.log(r.props.data),r.props.data.forEach((function(e){console.log(e);try{a[e.location].Weight+=Number(e.originalPercent),n[e.location].Weight+=Number(e.portfolioPercent)}catch(t){a[e.location]={Weight:Number(e.originalPercent),exchange:e.exchange},n[e.location]={Weight:Number(e.portfolioPercent),exchange:e.exchange}}})),Object.keys(a).forEach((function(r,c){e.push({Weight:a[r].Weight.toFixed(2),exchange:a[r].exchange}),t.push({Weight:n[r].Weight.toFixed(2),exchange:n[r].exchange})}))),console.log(t),r.setState({originalData:e,currentData:t,formattedData:t,updating:!1})}))},r.state={formattedData:[],originalData:[],currentData:[],updating:!1},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.formatData()}},{key:"shouldComponentUpdate",value:function(e,t){return this.prop!==e||this.state!==t}},{key:"componentDidUpdate",value:function(e){this.props!==e&&this.formatData()}},{key:"render",value:function(){var e={title:{visible:!1,text:"Location Breakdown"},description:{visible:!1,text:"some description"},radius:1,data:this.state.formattedData,angleField:"Weight",colorField:"exchange",statistic:{visible:!1}};return n.a.createElement(de.a,{title:"Location Breakdown",className:"cardRounded"},n.a.createElement(w.a,{justify:"center"},n.a.createElement(C.a,{span:24},0!==this.state.formattedData.length?n.a.createElement(Ie.a,e):n.a.createElement(Pe.a,{active:!0})),n.a.createElement(C.a,{span:24},"...largest location, smallest location")))}}]),a}(r.Component),Ae=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).formatData=function(){var e={},t={},a=[];0!==r.props.data.length&&(r.props.data.forEach((function(a){try{e[a.category].weight+=Number(a.portfolioPercent),t[a.category].weight+=Number(a.originalPercent)}catch(r){e[a.category]={weight:Number(a.portfolioPercent)},t[a.category]={weight:Number(a.originalPercent)}}})),r.state.marketSectors.forEach((function(r){try{a.push({"Market Sector":r,Weight:e[r].weight,Type:"Current"},{"Market Sector":r,Weight:t[r].weight,Type:"Original"})}catch(n){console.log(n)}}))),r.setState({formattedData:a})},r.state={formattedData:[],marketSectors:["Technology","Communication","Energy","Financial","Healthcare","Industrial","Consumer Staple","Consumer Discretionary","International","Misc","Utilities","Materials","Real Estate"]},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.formatData()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e||this.state!==t}},{key:"componentDidUpdate",value:function(e){console.log("update",e,this.props),this.props!==e&&this.formatData()}},{key:"render",value:function(){return n.a.createElement(de.a,{title:"Market Sector Weights",className:"cardRounded"},n.a.createElement(w.a,{justify:"center",align:"middle"},n.a.createElement(C.a,{span:24},0!==this.state.formattedData.length?n.a.createElement(Ie.b,Object.assign({},{title:{visible:!1,text:"Market Sector Radar"},angleField:"Market Sector",radiusField:"Weight",seriesField:"Type",radiusAxis:{grid:{line:{type:"line"}}},line:{visible:!0},area:{visible:!0,style:{opacity:.25}},point:{visible:!0,shape:"circle"},legend:{visible:!0,position:"bottom-center"}},{data:this.state.formattedData})):n.a.createElement(Pe.a,{active:!0}))),n.a.createElement(w.a,null,n.a.createElement(C.a,{span:24},"...heaviest industyr, lightest industyr, original heavy, original light")))}}]),a}(r.Component),Ne=a(878).a.RangePicker,Te=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).sortData=function(){!1===r.state.loading&&0!==r.props.data.length&&r.setState({loading:!0},(function(){var e=[],t=[];try{for(var a=0;a<r.props.data.length;a++){var n=r.props.data[a].transactions,c=Object.keys(n);console.log(n),t.push({value:r.props.data[a].ticker,text:r.props.data[a].ticker});for(var o=0;o<c.length;o++){var i=n[c[o]].date.split(" ");i.splice(5,5),i=i.join(" ");var s=void 0,l=n[c[o]].transaction;-1!==l.search(/bought/i)?s="Buy":-1!==l.search(/sell/i)&&(s="Sell"),e.push({ticker:r.props.data[a].ticker,key:a.toString()+o.toString(),date:i,action:l,type:s})}e.sort((function(e,t){return new Date(t.date)-new Date(e.date)})),r.setState({data:e,tickers:t,loading:!1})}}catch(u){console.log(u),r.setState({data:e,tickers:t,loading:!1})}console.log(e)}))},r.onDateRangeChange=function(e,t){var a,n;console.log(e,t),a=""===t[0]?null:new Date(t[0]+" 00:00:00"),n=""===t[1]?null:new Date(t[1]+"23:59:59"),r.setState({start:a,end:n})},r.state={loading:!1,data:[],tickers:[],start:null,end:null},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.sortData()}},{key:"shouldComponentUpdate",value:function(e,t,a){return this.props!==e||this.state!==t}},{key:"componentDidUpdate",value:function(e,t,a){this.props!==e&&this.sortData()}},{key:"render",value:function(){var e=this,t=[{title:"Date",dataIndex:"date",filterDropdown:function(){return n.a.createElement(Ne,{allowEmpty:[!0,!0],onCalendarChange:e.onDateRangeChange})},onFilter:function(t,a){var r=new Date(a.date);return console.log(r),null===e.state.start?r<=e.state.end:(null===e.state.end||r<=e.state.end)&&r>=e.state.start}},{title:"Type",dataIndex:"type",filters:[{value:"Buy",text:"Buy"},{value:"Sell",text:"Sell"}],onFilter:function(e,t){return 0===t.type.indexOf(e)}},{title:"Ticker",dataIndex:"ticker",filters:this.state.tickers,onFilter:function(e,t){return 0===t.ticker.indexOf(e)}},{title:"Action",dataIndex:"action"}];return n.a.createElement("div",null,n.a.createElement("div",{className:"stonkCardHeader"},n.a.createElement("h3",{style:{color:"#fff"}},"Recent Transactions")),n.a.createElement("div",{className:"stonkCardBody"},n.a.createElement(Ee.a,{columns:t,dataSource:this.state.data,loading:this.state.loading,rowClassName:"recentTransaction",size:"small",pagination:!1,scroll:{y:300}})))}}]),a}(r.Component),Be=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).setPortfolioListener=function(e){r.portfolioListener=f.ref("/portfolios/"+e).on("value",(function(e){r.formatData(e)}))},r.setCurrency=function(e){console.log(e)},r.state={borders:[8,8],data:[],currentValue:0,originalBookValue:0,updatingData:!1,currentUser:null,currency:"CAD"},r.formatData=r.formatData.bind(Object(L.a)(r)),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){console.log(h().currentUser);try{fetch("http://localhost:5000/stonksAPI/v1/update")}catch(e){console.log("Error: failed to fetch from api"),V.b.error("There was an error getting live stock data")}this.setPortfolioListener(h().currentUser.uid)}},{key:"shouldComponentUpdate",value:function(e,t,a){return this.props!==e||this.state.data!==t.data||this.state.currentUser!==t.currentUser||this.state.updatingData!==t.updatingData}},{key:"componentDidUpdate",value:function(e,t,a){var r=this;this.setState({currentUser:h().currentUser},(function(){null===r.state.currentUser&&(r.setState({data:[]}),r.portfolioListener.off())}))}},{key:"formatData",value:function(){var e=Object(D.a)(O.a.mark((function e(t){var a,r,n,c=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.val(),r=Object.keys(a),e.next=4,this.setPortfolio(a,r);case 4:n=e.sent,console.log(n),!1===this.state.updatingData&&this.setState({updatingData:!0},Object(D.a)(O.a.mark((function e(){var t,o,i,s,l,u,p,d,m,h;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue("current","tickers",r);case 3:for(t=e.sent,o={},i=0,s=0;s<r.length;s++)o[t[s].ticker]=t[s];for(l=0;l<r.length;l++)u=r[l],p=o[u.replace("_",".")],console.log(a,u,o),d=p.price*Number(a[u].shares),m=p.price*Number(a[u].shares)-a[u].cost,i+=d,n[l]=Object(ve.a)(Object(ve.a)({},n[l]),p),delete n[l].price,n[l].currentValue=d.toFixed(2),n[l].profit=m.toFixed(2),n[l].current=p.price.toFixed(2),n[l].profitPercent=(m/a[u].cost*100).toFixed(2);for(h=0;h<n.length;h++)n[h].portfolioPercent=(n[h].currentValue/i*100).toFixed(2),n[h].originalPercent=(n[h].cost/c.state.originalBookValue*100).toFixed(2);console.log(n),c.setState({updatingData:!1,data:n,currentValue:i}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),V.b.error("There was an error getting live stock data."),c.setState({updatingData:!1,currentValue:0});case 18:case"end":return e.stop()}}),e,null,[[0,13]])}))));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setPortfolio",value:function(){var e=Object(D.a)(O.a.mark((function e(t,a){var r,n,c,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],n=0,c=0;c<a.length;c++)n+=t[a[c]].cost,(o=Object(ve.a)(Object(ve.a)({},t[a[c]]),{},{ticker:a[c].replace("_","."),key:a[c].replace("_","."),portfolioPercent:0,originalPercent:0,current:0,currentValue:0,profit:0,profitPercent:0,changePercent:0,title:"Unknown",currency:"Unknown",exchange:"Unknown"})).cost=o.cost.toFixed(2),r.push(o);return this.setState({originalBookValue:n}),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e={sm:24,md:12,lg:8};return n.a.createElement("div",{className:"routerBackground"},n.a.createElement(w.a,{justify:"center",gutter:this.state.borders},n.a.createElement(C.a,{className:"gutter-row",span:24},n.a.createElement(De,{data:this.state.data,totalBookValue:this.state.originalBookValue,currentTotal:this.state.currentValue,setCurrency:this.setCurrency}))),n.a.createElement(w.a,{className:"gutter-row",justify:"center",gutter:this.state.borders},n.a.createElement(C.a,Object.assign({className:"gutter-row"},e),n.a.createElement(Ae,{data:this.state.data})),n.a.createElement(C.a,Object.assign({className:"gutter-row"},e),n.a.createElement(Ue,{data:this.state.data})),n.a.createElement(C.a,e,n.a.createElement(Te,{data:this.state.data}))),n.a.createElement(w.a,{justify:"center",gutter:this.state.borders},n.a.createElement(C.a,null),n.a.createElement(C.a,null)))}}]),a}(r.Component),Re=v.a.Header,Fe=v.a.Content,Me=(v.a.Footer,v.a.Sider);function Le(e){var t=e.component,a=e.authenticated,r=Object(p.a)(e,["component","authenticated"]);return n.a.createElement(g.b,Object.assign({},r,{render:function(e){return!0===a?n.a.createElement(t,null):n.a.createElement(g.a,{to:{pathname:"/",state:{from:e.location}}})}}))}var Ve=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).collapseSidebar=function(){r.setState({collapsed:!r.state.collapsed})},r.state={currentUser:null,authenticated:!1,collapsed:!0},r.separatorCol=15,r.userCol=2,r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;h().onAuthStateChanged((function(t){e.setState({currentUser:t},(function(){e.state.currentUser?e.setState({authenticated:!0}):e.setState({authenticated:!1})}))}))}},{key:"shouldComponentUpdate",value:function(e,t,a){return this.state.currentUser!==h().currentUser||this.state.authenticated!==t.authenticated||this.state.collapsed!==t.collapsed}},{key:"componentDidUpdate",value:function(){null===h().currentUser?this.setState({authenticated:!1}):this.setState({authenticated:!0}),this.setState({currentUser:h().currentUser})}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(b.a,null,n.a.createElement(v.a,null,n.a.createElement(Re,{style:{position:"fixed",zIndex:10,width:"100%"}},n.a.createElement(Q,{currentUser:this.state.currentUser})),n.a.createElement(v.a,null,n.a.createElement(Me,{breakpoint:"lg",collapsible:!0,style:{height:"200vh",zIndex:0},collapsed:this.state.collapsed,trigger:null},n.a.createElement("br",null),n.a.createElement(y.a,{offsetTop:25},n.a.createElement(ne,{authenticated:this.state.authenticated,isCollapsed:this.state.collapsed,collapse:this.collapseSidebar}))),n.a.createElement(Fe,null,n.a.createElement(g.d,null,n.a.createElement(g.b,{exact:!0,path:"/",component:be}),n.a.createElement(Le,{path:"/portfolio",authenticated:this.state.authenticated,component:Be})))))))}}]),a}(r.Component);o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(Ve,null)),document.getElementById("root"))},89:function(e,t,a){}},[[464,1,2]]]);
//# sourceMappingURL=main.ab3ecd10.chunk.js.map